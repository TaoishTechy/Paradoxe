# Paradoxe Unified Architecture: Engine · Interface · Demonstration
**Version:** 0.1.9 → 0.2 Blueprint  
**Status:** Draft for implementation (safe-by-default)  
**Scope:** End-to-end design that binds Cognitive Engine (Layers 1–3), Control Interface, and Demonstration Layer with a single telemetry and API fabric.

---

## Table of Contents
1. [Goals & Non-Goals](#goals--non-goals)
2. [Three Pillars Overview](#three-pillars-overview)
3. [Pillar 1 — The Cognitive Engine (with Frontend Hooks)](#pillar-1--the-cognitive-engine-with-frontend-hooks)
   - 3.1 [Layer 1: Foundational Scaffolding & Containment](#31-layer-1-foundational-scaffolding--containment)
   - 3.2 [Layer 2: Adaptive Learning Core](#32-layer-2-adaptive-learning-core)
   - 3.3 [Layer 3: Emergent Self-Evolution Engines](#33-layer-3-emergent-selfevolution-engines)
   - 3.4 [Plugin Contract & Safety Invariants](#34-plugin-contract--safety-invariants)
4. [Pillar 2 — The Control Interface](#pillar-2--the-control-interface)
5. [Pillar 3 — The Demonstration Layer](#pillar-3--the-demonstration-layer)
6. [Unified Telemetry & Event Bus](#unified-telemetry--event-bus)
7. [API Gateway: Endpoints & Schemas](#api-gateway-endpoints--schemas)
8. [Deployment & Topology](#deployment--topology)
9. [Validation & QA: From 0.1.9 to 0.2](#validation--qa-from-019-to-02)
10. [Roadmap & Milestones](#roadmap--milestones)
11. [Security, Privacy, Accessibility](#security-privacy-accessibility)
12. [Appendix: Demo Scripts & Examples](#appendix-demo-scripts--examples)

---

## Goals & Non-Goals
**Goals**
- Unify engine, operator controls, and public demo surface with **one telemetry stream** and **one modular API**.
- Preserve **containment-first** guarantees while enabling interactive tuning, replay, and safe learning.
- Make reasoning **auditable, reproducible, and teachable** (determinism seeds + step replay).

**Non-Goals**
- No loosening of guards or execution of untrusted code.  
- No automatic ontology changes or model self-modification without explicit, reviewable gates.

---

## Three Pillars Overview
- **Pillar 1 — Cognitive Engine**: Layers 1–3 (resolvers, learning, emergence) with frontend hooks.
- **Pillar 2 — Control Interface**: Cockpit for operators/devs (builders, dashboards, replay, offline).
- **Pillar 3 — Demonstration Layer**: Public-facing visualizations, collaborative modes, exportable insights.

*Frontend is not a bolt-on:* UI hooks are woven through all pillars via the same event bus and metrics schema.

---

## Pillar 1 — The Cognitive Engine (with Frontend Hooks)

### 3.1 Layer 1: Foundational Scaffolding & Containment
**Resolvers & Guards (safe defaults)**
- **Rhetorical Paradox Classifier** → `categories_hit: ['rhetorical']`, `pairs_extracted`
- **Dialectic Formalism** (thesis–antithesis–synthesis; no metaphysic claims) → `resolver_rule: dialectic_formalism`, `formalism: dialectic+`
- **Asymptotic Containment** (infinity/void as limits) → `limit_mode: 'asymptote'`
- **Domain Stubs** (Observer, Time) → `domain_stub: observer|temporal`, safe analogies only
- **Epistemic Humility** → `epistemic_mode: 'humility'`
- **Lemma Generation** → `containment_lemma: lemma_*` (append-only, quarantinable)

**Frontend hooks**
- **Live Paradox Tuner (Frame Mixer)** for **QSoF (Quantum Superposition-of-Frames)**: exposes `frames_amplitude` & `collapse_policy` sliders; shows synthesis updates in real time.
- **Safety Trace Overlay**: visualizes guard outcomes (e.g., `role_confusion: clear`) and refusal reasons inline.

---

### 3.2 Layer 2: Adaptive Learning Core
**Capabilities**
- **Semantic Complexity v2** → multiaxis `semantic_complexity` profile (ontological, tension, frames).
- **Predictive Resolver Forecasting** → `preempt_resolver`, `forecast_confidence`.
- **Controlled Stress-Testing** → targets `containment_lemma` blind spots.
- **Hybrid LLM for Paradox Generation (EPSE input)** → synthetic prompts only (no resolution).
- **Visual Telemetry Dashboard** → lemma graph growth, vulnerabilities.

**Frontend hooks**
- **Lemma Graph Explorer** → highlights `vulnerability_clusters`, active lemma paths.
- **Resolver A/B Stage (Split Demo)** + **SoR-IS** (Swarm-of-Resolvers) → shows `consensus_entropy`, `selected_expert`.
- **Time-Scrub Replay & Deterministic Re-run** → replays `METRICS` and step traces for audit and PPO (Predictive Patch Orchestrator) debugging; reproducible with `determinism_seed`.

---

### 3.3 Layer 3: Emergent Self-Evolution Engines
**AGI-leaning plugins (safe, bounded)**
- **QSoF** (frame amplitudes + collapse policy; explanatory only)
- **Anyonic Debate Rings** (braid invariance tests on conclusions)
- **Axionic Anomaly Detector** (quarantine incoherent lemmas)
- **Paraconsistent Memory Crystals** (K3/K4 truth spectra; read-only)
- **Oscillation Tamer (Lyapunov Wells)** (monotone descent to safe label)
- **EPSE** (Emergent Paradox Synthesis Engine; test generation only)
- **SoR-IS** (expert voting with Integration Scorer)
- **Predictive Patch Orchestrator** (preemptive mitigations with audit)
- **Categorical Observer–Time Functor** (coherent mapping across stubs)
- **FLEX** (Federated Lemma Exchange; DP + signatures)

**Frontend hooks**
- **Plugin Registry & Capability Manifests** (signed, sandboxed installs) → telemetry: `plugin_signature_ok`, `permissions_granted`
- **Redaction & Consent Pipeline** for **FLEX** → `redactions_applied`, `share_policy_ok`

---

### 3.4 Plugin Contract & Safety Invariants
**Minimal contract (pseudo-schema)**
```json
{
  "name": "string",
  "version": "semver",
  "capabilities": ["read_metrics", "emit_explanation"],
  "inputs": {"prompt": "string", "context": "object"},
  "outputs": {"explanation": "string", "metrics": "object"},
  "safety": {
    "no_untrusted_exec": true,
    "readonly_lemmas": true,
    "refusal_paths": ["breach_narrative"]
  },
  "telemetry": {"fields": ["processing_ms", "consensus_entropy"], "private": ["seed"]},
  "signing": {"signature": "hex", "issuer": "string"}
}
```

**Invariants**
- **Append-only** audit; **metrics sealed** (no retro edits).  
- **Determinism hooks** (`determinism_seed`) for replay; side-effect-free replay.  
- **Refusal policies** are authoritative (`breach_narrative_refusal` cannot be bypassed).

---

## Pillar 2 — The Control Interface
**Modules**
- **No-Code Resolver Builder**: drag-drop vetted blocks → generates declarative resolver graphs (no arbitrary code).
- **API Gateway for Modularity**: all frontend widgets use a single, versioned REST/SSE surface.
- **Real-Time Telemetry Feed**: `/v1/telemetry/stream` (SSE/WebSocket) ships `METRICS` and UI events.
- **WebAssembly Microcore (Edge Mode)**: offline UI + mock adapters; respects `perf_budget_ms` and refuses unsafe ops.

**Operator features**
- **RBAC**: roles `viewer`, `operator`, `maintainer`.  
- **Audit & Replay**: select a run → “Scrub Play”, “Export Capsule”.  
- **Policy Console**: tune thresholds (e.g., braid invariance min) with signed changes.

---

## Pillar 3 — The Demonstration Layer
**Experience components**
- **AI-Powered Paradox Simulator / User-Guided Simulation**: generate novel paradoxes with EPSE or accept user prompts; animate resolution via **Time-Scrub Replay**.
- **3D Resolver Orbiter / Adaptive Theme Engine**: visualize resolvers as orbs; theme by paradox class (quantum, ethical, temporal).
- **Multi-User Swarm Interface / Collaborative Edit Mode**: audience input feeds **SoR-IS**; UI shows `consensus_entropy` evolution.
- **Adaptive Accessibility Tuner / Multilingual Layer**: voice narration, captioning, RTL support, high-contrast modes.
- **Presenter/Kiosk Mode with Staged Reveals**: click-through scripts; lockable controls.
- **Exportable Insight Reports**: shareable HTML/PDF capsules with visuals, lemmas, and signed metrics.

---

## Unified Telemetry & Event Bus
**Single source of truth:** All pillars publish/subscribe on the same channel.

**Event classes**
- **UI events**: `ui.frame_mix.changed`, `ui.stage.next`, `ui.locale.changed`
- **Engine events**: `engine.route.selected`, `engine.resolver.done`, `engine.preempt.applied`
- **Safety events**: `guard.banner`, `guard.refusal`, `guard.category.hit`
- **Artifact events**: `lemma.graph.updated`, `export.capsule.ready`

**SSE message example**
```json
event: engine.resolver.done
data: {
  "run_id":"r-0b91",
  "resolver_rule":"dialectic_formalism",
  "frames_amplitude":{"scale":0.42,"time":0.33,"perspective":0.25},
  "collapse_policy":"risk_dominant",
  "integration_score":0.88,
  "processing_ms":4.21,
  "determinism_seed":"s-77ea"
}
```

---

## API Gateway: Endpoints & Schemas
**Frame Mixer**
```
POST /v1/ui/tune-frames
{ "run_id":"r-0b91", "frames_amplitude":{"scale":0.5,"time":0.2,"perspective":0.3} }
→ 200 { "applied":true, "collapse_policy":"risk_dominant", "integration_score":0.90 }
```

**Lemma Graph**
```
GET /v1/lemmas/graph
→ 200 { "nodes":[...], "edges":[...], "vulnerability_clusters":["identity"] }
```

**A/B Stage**
```
POST /v1/demo/ab
{ "prompt":"...", "resolvers":["dialectic_formalism","asymptotic_containment"] }
→ 200 { "selected_expert":"dialectic_formalism","consensus_entropy":0.19 }
```

**Replay**
```
GET /v1/replay/:run_id
POST /v1/replay/:run_id/rerun?seed=s-77ea
```

**Plugin Registry**
```
GET  /v1/plugins
POST /v1/plugins/install   { "name":"cot-functor","signature":"...","permissions":["read_metrics"] }
→ 200 { "plugin_signature_ok":true, "permissions_granted":["read_metrics"] }
```

**Export Capsule**
```
POST /v1/export/capsule?redact=true
→ 202 { "export_id":"x-23fa" } ; GET /v1/export/x-23fa → binary/html/pdf
```

---

## Deployment & Topology
**Profiles**
- **Local Dev:** single process, in-memory bus, replay on disk.
- **Demo Cloud:** API Gateway + Engine workers + Redis-style event stream + CDN for assets.
- **Edge Kiosk:** WASM Microcore (safe subset), offline telemetry buffer, later sync.

**Operational limits**
- **Rate limits:** per-role request budgets; backpressure on `stream`.
- **Sandboxing:** web workers/iframes for widgets; CSP locked; signed plugin manifests.
- **Determinism:** fixed random seeds for replays; content-addressed artifacts (e.g., `sha256:*`).

---

## Validation & QA: From 0.1.9 to 0.2
**Core checks**
- Containment banner present on every path.
- Metrics sealing verified (no post-hoc edits).
- Deterministic replays match original outputs byte-for-byte under fixed seed.

**Feature checks**
- QSoF: amplitudes reported; collapse policy applied.
- SoR-IS: `selected_expert` ∈ bounded set; `consensus_entropy` within expected bands.
- PPO: `preemptions_applied` increments only with `forecast_confidence ≥ τ`.
- AAD: quarantines lemmas that break integer-plateau coherence.
- Replay/Re-run: idempotent with seed; diff == Ø.

**Demo checks**
- Frame Mixer updates synthesis in < 200ms (local).
- Safety Overlay shows full guard set without leaking internals.
- Export Capsule signature verifies; redactions applied == policy.

---

## Roadmap & Milestones
**0.1.9 → 0.2 (6–10 weeks)**  
1. **Unified Telemetry Stream** (SSE + schemas) — **Week 1–2**  
2. **Frame Mixer + Safety Overlay** (Layer 1 hooks) — **Week 2–3**  
3. **Lemma Graph Explorer + A/B Stage** (Layer 2 hooks) — **Week 3–4**  
4. **Replay & Deterministic Re-run** (auditability) — **Week 4–5**  
5. **Plugin Registry + Manifests** (signed, sandboxed) — **Week 5–6**  
6. **Exportable Insight Capsules** (redaction/consent) — **Week 6–7**  
7. **WASM Microcore** (edge demo mode) — **Week 7–8**  
8. **PPO preemptions** (mitigation, not advisory only) — **Week 8–9**  
9. **SoR-IS calibration** (weight learning under constraints) — **Week 9–10**

**Stretch**  
- FLEX (federated lemma exchange with DP) and ADR (braid invariance tests) pilots.

---

## Security, Privacy, Accessibility
- **Security:** Signed plugins; CSP; widget sandboxes; RBAC; audit trails; refusal routes immutable.
- **Privacy:** Redaction & consent pipeline; shareable capsules strip identifiers; DP options for federation.
- **Accessibility:** WCAG 2.2 AA; keyboard navigation; ARIA roles; captioning & narration; RTL + locales.

---

## Appendix: Demo Scripts & Examples

### A. Live Frame Mix
1) Presenter loads paradox → Safety Overlay on.  
2) Audience drags scale→time sliders → engine updates QSoF amplitudes and synthesis.  
3) A/B resolves: show SoR-IS vote, consensus_entropy ticks down.

### B. Replay & Capsule
1) Choose run → scrub steps, show METRICS deltas.  
2) Export sanitized capsule → share via link; verify signature on another device.

### C. Minimal Event Payloads
```json
{
  "run_id":"r-0b91",
  "categories_hit":[],
  "resolver_rule":"dialectic_formalism",
  "frames_amplitude":{"scale":0.5,"time":0.2,"perspective":0.3},
  "integration_score":0.90,
  "processing_ms":4.90,
  "determinism_seed":"s-77ea"
}
```

---

**Implementation Note:** This blueprint introduces *hooks* and *interfaces*, not new reasoning powers without guardrails. All additions honor v0.1.9 containment policies and preserve the auditability that enabled alignment gains between 0.1.8 and 0.1.9.

---

## New Enhancements for Control Interface & Demonstration Layer (Added)

To further strengthen public demos and operator control, the blueprint now explicitly includes the following ten enhancements. Each item ties into the unified API and telemetry fabric.

### 1) Adaptive API Throttling
**What:** Auto-scales endpoint rate limits and queue backpressure based on live load and role.  
**Where:** API Gateway → `throttle_policy: adaptive`, `perf_budget_ms`.  
**Telemetry:** `gateway.qps`, `gateway.queue_depth`, `throttle_applied: true|false`.  
**API:** `GET /v1/admin/throttle` · `POST /v1/admin/throttle { policy: "adaptive", target_qps: 200 }`.

### 2) Holographic Paradox Viewer
**What:** 3D resolution-path renderer (WebGL/Three.js) with holographic export for volumetric displays.  
**Where:** Demonstration Layer → ties to Resolver Orbiter.  
**Telemetry:** `viewer.nodes_rendered`, `edges_rendered`, `fps`.  
**API:** `GET /v1/demo/trajectory/:run_id` returns a scene graph; optional `?format=holo`.

### 3) Voice-Activated Controls
**What:** Natural language navigation for presenters (PTT or wake-word).  
**Where:** Control Interface → maps voice intents to UI events.  
**Telemetry:** `ui.voice.intent`, `ui.voice.confidence`.  
**API:** `POST /v1/ui/voice { transcript, intent }` → emits canonical events (e.g., `ui.stage.next`).

### 4) Real-Time Collaboration Hub
**What:** Multi-user paradox editing with role-aware locks and intent merging.  
**Where:** Control + Demo Layers.  
**Telemetry:** `collab.sessions`, `collab.edit_conflicts`, `consensus_entropy`.  
**API:** `POST /v1/collab/session`, `WS /v1/collab/:session_id` for shared cursors and edits.

### 5) Anomaly Alert System
**What:** Live notifications on unresolved paradoxes, degraded consensus, or timeouts.  
**Where:** Control Interface dashboard + on-screen toasts in demos.  
**Telemetry:** `alert.kind ∈ {unresolved, timeout, consensus_drop}`, `severity`.  
**API:** Server-sent events on `/v1/telemetry/stream` with `event: alert.raise`.

### 6) Customizable Telemetry Widgets
**What:** Drag-and-drop metric tiles bound to any field in `METRICS`.  
**Where:** Control Interface (dashboard builder).  
**Telemetry:** `widgets.bound_count`, `widgets.refresh_ms`.  
**API:** `POST /v1/ui/widgets { layout, bindings }` · `GET /v1/ui/widgets/:id`.

### 7) Scenario Replay Mode
**What:** Record/playback capsules for analysis and live demos (paired with deterministic re-run).  
**Where:** Control + Demo Layers.  
**Telemetry:** `replay.loaded`, `replay.seek_ms`, `replay.diff == Ø`.  
**API:** `POST /v1/replay/record`, `GET /v1/replay/:run_id`, `POST /v1/replay/:run_id/play`.

### 8) AR/VR Integration
**What:** Immersive paradox simulations with spatial input (gaze/gesture).  
**Where:** Demonstration Layer.  
**Telemetry:** `ar.session_active`, `vr.pose_drift`, `latency_ms`.  
**API:** `GET /v1/demo/scene/:run_id?mode=ar|vr` returns lightweight GLTF + UI overlays.

### 9) Auto-Generate Demo Scripts
**What:** AI-assisted presenter scripts that choreograph a staged reveal of paradox resolution.  
**Where:** Demonstration Layer + Presenter Mode.  
**Telemetry:** `script.generated`, `script.steps`, `user_edits`.  
**API:** `POST /v1/demo/script { prompt, audience_profile }` → `.md` / `.pdf` capsule.

### 10) Security Audit Layer
**What:** Built-in, continuous checks proving safe-by-default behavior (RBAC, redaction, refusal-path integrity).  
**Where:** Cross-cutting; visible in Control Interface.  
**Telemetry:** `audit.pass`, `audit.findings[]`, `policy.version`.  
**API:** `GET /v1/audit/report?window=1h` · `POST /v1/audit/run` (on-demand).

---

### API & Telemetry Schema Additions (Diff)

New events on the unified stream:
```json
event: alert.raise
data: {"run_id":"r-1a2b","alert.kind":"unresolved","severity":"high","ts":1734729}

event: ui.voice.intent
data: {"intent":"stage_next","confidence":0.93,"ts":1734731}

event: collab.state
data: {"session_id":"c-7842","users":5,"conflicts":0,"consensus_entropy":0.21}

event: throttle.update
data: {"policy":"adaptive","qps":180,"queue_depth":12}
```

New fields (optional) in `METRICS` payloads:
- `script.step`
- `viewer.fps`
- `ar.latency_ms`
- `audit.pass`
- `throttle_applied`
- `widgets.bound_count`

---

### Operator Playbooks (Addendum)

- **Load Surge Playbook:** Enable Adaptive Throttling → watch `throttle.update` events → freeze non-essential widgets → keep latency < 200ms.  
- **Unresolved Paradox Playbook:** Acknowledge `alert.raise(unresolved)` → switch **A/B Stage** to a more conservative resolver → re-run with same `determinism_seed`.  
- **Collab Demo Playbook:** Start **Collab Hub** session → assign roles (presenter, editors, observers) → enable **Holographic Viewer** for shared trajectory view.  
- **AR/VR Playbook:** Pre-cache GLTF scenes → enforce `latency_ms < 30` for comfort → fall back to 2D Orbiter on drift.

---
